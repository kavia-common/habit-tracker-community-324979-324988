{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing user habits, including creating, retrieving, updating, deleting habits, and handling check-ins and streak calculations. It uses FastAPI framework, SQLAlchemy ORM models, and schemas to facilitate CRUD operations and habit streak management.", "external_files": ["src.api.core.db", "src.api.deps", "src.api.models", "src.api.schemas"], "external_methods": ["get_db", "get_current_user"], "published": ["list_habits", "create_habit", "get_habit", "update_habit", "delete_habit", "get_streak", "create_checkin", "list_checkins"], "classes": [], "methods": [{"name": "Habit _get_user_habit(db: Session, user_id, habit_id)", "description": "Private helper to retrieve a habit for a user, raises 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "HabitStreak _recompute_streak(db: Session, habit: Habit)", "description": "Recalculates the streak for a habit based on check-in dates, updating corresponding database records.", "scope": "", "scopeKind": ""}, {"name": "HabitCheckinResponse create_checkin( habit_id, payload: HabitCheckinCreateRequest, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "HabitResponse create_habit( payload: HabitCreateRequest, db: Session = Depends(get_db), current: User = Depends(get_current_user) )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None delete_habit(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "HabitResponse get_habit(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "HabitStreakResponse get_streak(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[HabitCheckinResponse] list_checkins( habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user), limit: int = 50, )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[HabitResponse] list_habits(db: Session = Depends(get_db), current: User = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "HabitResponse update_habit( habit_id, payload: HabitUpdateRequest, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["select", "db.execute", "db.get", "db.add", "db.commit", "db.refresh", "db.delete", "scalar_one_or_none", "max", "raise HTTPException", "list", "max"], "search-terms": ["habits", "streak", "checkins", "API router", "HabitStreak", "HabitCheckin", "Habit"], "state": 2, "file_id": 12, "knowledge_revision": 42, "git_revision": "698fa53c67d51cf7663786a76b9e98dfdcffcaab", "revision_history": [{"25": ""}, {"42": "698fa53c67d51cf7663786a76b9e98dfdcffcaab"}], "ctags": [{"_type": "tag", "name": "_get_user_habit", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def _get_user_habit(db: Session, user_id, habit_id) -> Habit:$/", "language": "Python", "typeref": "typename:Habit", "kind": "function", "signature": "(db: Session, user_id, habit_id)"}, {"_type": "tag", "name": "_recompute_streak", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def _recompute_streak(db: Session, habit: Habit) -> HabitStreak:$/", "language": "Python", "typeref": "typename:HabitStreak", "kind": "function", "signature": "(db: Session, habit: Habit)"}, {"_type": "tag", "name": "create_checkin", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def create_checkin($/", "language": "Python", "typeref": "typename:HabitCheckinResponse", "kind": "function", "signature": "( habit_id, payload: HabitCheckinCreateRequest, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "create_habit", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def create_habit($/", "language": "Python", "typeref": "typename:HabitResponse", "kind": "function", "signature": "( payload: HabitCreateRequest, db: Session = Depends(get_db), current: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "delete_habit", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def delete_habit(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_us/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user))"}, {"_type": "tag", "name": "get_habit", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def get_habit(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user)/", "language": "Python", "typeref": "typename:HabitResponse", "kind": "function", "signature": "(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user))"}, {"_type": "tag", "name": "get_streak", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def get_streak(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user/", "language": "Python", "typeref": "typename:HabitStreakResponse", "kind": "function", "signature": "(habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user))"}, {"_type": "tag", "name": "list_checkins", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def list_checkins($/", "language": "Python", "typeref": "typename:list[HabitCheckinResponse]", "kind": "function", "signature": "( habit_id, db: Session = Depends(get_db), current: User = Depends(get_current_user), limit: int = 50, )"}, {"_type": "tag", "name": "list_habits", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def list_habits(db: Session = Depends(get_db), current: User = Depends(get_current_user)) -> lis/", "language": "Python", "typeref": "typename:list[HabitResponse]", "kind": "function", "signature": "(db: Session = Depends(get_db), current: User = Depends(get_current_user))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^router = APIRouter(prefix=\"\\/habits\", tags=[\"habits\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_habit", "path": "/home/kavia/workspace/code-generation/habit-tracker-community-324979-324988/habit_buddy_backend/src/api/routers/habits.py", "pattern": "/^def update_habit($/", "language": "Python", "typeref": "typename:HabitResponse", "kind": "function", "signature": "( habit_id, payload: HabitUpdateRequest, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}], "hash": "faf0c580ff63637c41f19cde4f86d3b5", "format-version": 4, "code-base-name": "habit_buddy_backend", "filename": "habit_buddy_backend/src/api/routers/habits.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/habits\", tags=[\"habits\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}